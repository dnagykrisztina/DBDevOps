<!DOCTYPE HTML>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<title>ps_trace_statement_digest</title>
<script src="../../../../../scripts/jquery-1.12.0.min.js" type="text/javascript"></script>
<script src="../../../../../scripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../../../../../scripts/clipboard.min.js" type="text/javascript"></script>
<script src="../../../../../scripts/main.js" type="text/javascript"></script>
<link rel="stylesheet" href="../../../../../styles/bootstrap/Default Dark.css" type="text/css">
<link rel="stylesheet" href="../../../../../styles/main.css" type="text/css">
</head>
<body class="watermark">

  <div class="page-wrap">
    <div class="header">
      <div class="row">
        <div class="col-xs-12">
          <ol class="breadcrumb">
            <li><a href="../../../../../startpage.html" data-mapping-enabled="true">Project</a></li>
            <li><a href="../../../../../Servers\Servers.html" data-mapping-enabled="true">Servers</a></li>
            <li><a href="../../../../../Servers\Cars.localhost\Cars.localhost.html" data-mapping-enabled="true">Cars.localhost</a></li>
            <li><a href="../../../../../Servers\Cars.localhost\Databases\Databases.html" data-mapping-enabled="true">Databases</a></li>
            <li><a href="../../../../../Servers\Cars.localhost\Databases\sys\sys.html" data-mapping-enabled="true">sys</a></li>
            <li><a href="../../../../../Servers\Cars.localhost\Databases\sys\Procedures\Procedures.html" data-mapping-enabled="true">Procedures</a></li>
            <li class="active">ps_trace_statement_digest</li>
          </ol>
        </div>
      </div>
      <div class="row">
        <div class="title col-xs-12">
          <div><img class="inline-middle image-large" src="../../../../../images/Dark\procedure.svg" title="ps_trace_statement_digest" />
            <h1 class="inline-middle">ps_trace_statement_digest</h1>
            <div class="dropdown actions-btn-wrap">
              <button type="button" class="btn btn-default actions-btn" data-toggle="dropdown"><span class="icon-actions icon-small actions-btn-span"></span></button>
              <ul class="dropdown-menu dropdown-menu-right">
                <li><a id="CollapseAll" href="#">Collapse All</a></li>
                <li><a id="ExpandAll" href="#">Expand All</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="content">
      <div id="Description" class="panel panel-default">
        <div class="panel-heading">
          <span class="icon-bottom inline-middle expanded icon-small"></span>
          <span class="icon-right inline-middle collapsed icon-small" style="display:none"></span>
          <h2 class="inline-middle">Description</h2>
        </div>
        <div class="panel-collapse collapse in">
          <div class="panel-body">
            <span><br />Description<br />-----------<br /><br />Traces all instrumentation within Performance Schema for a specific<br />Statement Digest.<br /><br />When finding a statement of interest within the<br />performance_schema.events_statements_summary_by_digest table, feed<br />the DIGEST value in to this procedure, set how long to poll for,<br />and at what interval to poll, and it will generate a report of all<br />statistics tracked within Performance Schema for that digest for the<br />interval.<br /><br />It will also attempt to generate an EXPLAIN for the longest running<br />example of the digest during the interval. Note this may fail, as:<br /><br />   * Performance Schema truncates long SQL_TEXT values (and hence the<br />     EXPLAIN will fail due to parse errors)<br />   * the default schema is sys (so tables that are not fully qualified<br />     in the query may not be found)<br />   * some queries such as SHOW are not supported in EXPLAIN.<br /><br />When the EXPLAIN fails, the error will be ignored and no EXPLAIN<br />output generated.<br /><br />Requires the SUPER privilege for "SET sql_log_bin = 0;".<br /><br />Parameters<br />-----------<br /><br />in_digest (VARCHAR(64)):<br />  The statement digest identifier you would like to analyze<br />in_runtime (INT):<br />  The number of seconds to run analysis for<br />in_interval (DECIMAL(2,2)):<br />  The interval (in seconds, may be fractional) at which to try<br />  and take snapshots<br />in_start_fresh (BOOLEAN):<br />  Whether to TRUNCATE the events_statements_history_long and<br />  events_stages_history_long tables before starting<br />in_auto_enable (BOOLEAN):<br />  Whether to automatically turn on required consumers<br /><br />Example<br />-----------<br /><br />mysql> call ps_trace_statement_digest('891ec6860f98ba46d89dd20b0c03652c', 10, 0.1, true, true);<br />+--------------------+<br />| SUMMARY STATISTICS |<br />+--------------------+<br />| SUMMARY STATISTICS |<br />+--------------------+<br />1 row in set (9.11 sec)<br /><br />+------------+-----------+-----------+-----------+---------------+------------+------------+<br />| executions | exec_time | lock_time | rows_sent | rows_examined | tmp_tables | full_scans |<br />+------------+-----------+-----------+-----------+---------------+------------+------------+<br />|         21 | 4.11 ms   | 2.00 ms   |         0 |            21 |          0 |          0 |<br />+------------+-----------+-----------+-----------+---------------+------------+------------+<br />1 row in set (9.11 sec)<br /><br />+------------------------------------------+-------+-----------+<br />| event_name                               | count | latency   |<br />+------------------------------------------+-------+-----------+<br />| stage/sql/checking query cache for query |    16 | 724.37 us |<br />| stage/sql/statistics                     |    16 | 546.92 us |<br />| stage/sql/freeing items                  |    18 | 520.11 us |<br />| stage/sql/init                           |    51 | 466.80 us |<br />...<br />| stage/sql/cleaning up                    |    18 | 11.92 us  |<br />| stage/sql/executing                      |    16 | 6.95 us   |<br />+------------------------------------------+-------+-----------+<br />17 rows in set (9.12 sec)<br /><br />+---------------------------+<br />| LONGEST RUNNING STATEMENT |<br />+---------------------------+<br />| LONGEST RUNNING STATEMENT |<br />+---------------------------+<br />1 row in set (9.16 sec)<br /><br />+-----------+-----------+-----------+-----------+---------------+------------+-----------+<br />| thread_id | exec_time | lock_time | rows_sent | rows_examined | tmp_tables | full_scan |<br />+-----------+-----------+-----------+-----------+---------------+------------+-----------+<br />|    166646 | 618.43 us | 1.00 ms   |         0 |             1 |          0 |         0 |<br />+-----------+-----------+-----------+-----------+---------------+------------+-----------+<br />1 row in set (9.16 sec)<br /><br />// Truncated for clarity...<br />+-----------------------------------------------------------------+<br />| sql_text                                                        |<br />+-----------------------------------------------------------------+<br />| select hibeventhe0_.id as id1382_, hibeventhe0_.createdTime ... |<br />+-----------------------------------------------------------------+<br />1 row in set (9.17 sec)<br /><br />+------------------------------------------+-----------+<br />| event_name                               | latency   |<br />+------------------------------------------+-----------+<br />| stage/sql/init                           | 8.61 us   |<br />| stage/sql/Waiting for query cache lock   | 453.23 us |<br />| stage/sql/init                           | 331.07 ns |<br />| stage/sql/checking query cache for query | 43.04 us  |<br />...<br />| stage/sql/freeing items                  | 30.46 us  |<br />| stage/sql/cleaning up                    | 662.13 ns |<br />+------------------------------------------+-----------+<br />18 rows in set (9.23 sec)<br /><br />+----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+<br />| id | select_type | table        | type  | possible_keys | key       | key_len | ref         | rows | Extra |<br />+----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+<br />|  1 | SIMPLE      | hibeventhe0_ | const | fixedTime     | fixedTime | 775     | const,const |    1 | NULL  |<br />+----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+<br />1 row in set (9.27 sec)<br /><br />Query OK, 0 rows affected (9.28 sec)</span>
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <span class="icon-bottom inline-middle expanded icon-small"></span>
          <span class="icon-right inline-middle collapsed icon-small" style="display:none"></span>
          <h2 class="inline-middle">Properties</h2>
        </div>
        <div class="panel-collapse collapse in">
          <div class="panel-body">
            <table class="table table-hover table-bordered">
              <tbody>
                <tr>
                  <th>Name</th>
                  <th>Value</th>
                </tr>
                <tr>
                  <td>SQL Access</td>
                  <td>MODIFIES SQL DATA</td>
                </tr>
                <tr>
                  <td>Deterministic</td>
                  <td><p class="value-false">False</p></td>
                </tr>
                <tr>
                  <td>Security</td>
                  <td>Invoker</td>
                </tr>
                <tr>
                  <td>Definer</td>
                  <td>mysql.sys@'localhost'</td>
                </tr>
                <tr>
                  <td>SQL Mode</td>
                  <td>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</td>
                </tr>
                <tr>
                  <td>Language</td>
                  <td>SQL</td>
                </tr>
                <tr>
                  <td>Created</td>
                  <td>2021. 04. 10. 15:37:00</td>
                </tr>
                <tr>
                  <td>Last Modified</td>
                  <td>2021. 04. 10. 15:37:00</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div id="Parameters" class="panel panel-default">
        <div class="panel-heading">
          <span class="icon-bottom inline-middle expanded icon-small"></span>
          <span class="icon-right inline-middle collapsed icon-small" style="display:none"></span>
          <h2 class="inline-middle">Parameters</h2>
        </div>
        <div class="panel-collapse collapse in">
          <div class="panel-body">
            <table class="table table-hover table-bordered table-100">
              <tbody>
                <tr>
                  <th>Name</th>
                  <th>Data Type</th>
                  <th>Length</th>
                  <th>Precision</th>
                  <th>Scale</th>
                </tr>
                <tr>
                  <td>in_digest</td>
                  <td>VARCHAR</td>
                  <td>64</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>in_runtime</td>
                  <td>INT</td>
                  <td></td>
                  <td>11</td>
                  <td></td>
                </tr>
                <tr>
                  <td>in_interval</td>
                  <td>DECIMAL</td>
                  <td></td>
                  <td>2</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td>in_start_fresh</td>
                  <td>BOOLEAN</td>
                  <td></td>
                  <td>1</td>
                  <td></td>
                </tr>
                <tr>
                  <td>in_auto_enable</td>
                  <td>BOOLEAN</td>
                  <td></td>
                  <td>1</td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div id="SqlScript" class="panel panel-default">
        <div class="panel-heading">
          <span class="icon-bottom inline-middle expanded icon-small"></span>
          <span class="icon-right inline-middle collapsed icon-small" style="display:none"></span>
          <h2 class="inline-middle">SQL Script</h2>
        </div>
        <div class="panel-collapse collapse in">
          <div class="panel-body">
            <div class="zero-clipboard">
              <span class="btn-clipboard btn-default panel-default" data-clipboard-action="copy" data-clipboard-target=".SqlScript" data-toggle="tooltip" title="Copy to clipboard">Copy</span></div><div class="SqlScript  panel-default" style="word-wrap: break-word; padding-right:60px">
              <font color="#569cd6">CREATE</font>&nbsp;<font color="#569cd6">PROCEDURE</font>&nbsp;<font color="#ffffff">ps_trace_statement_digest</font><font color="#b4b4b4">(</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IN</font>&nbsp;<font color="#ffffff">in_digest</font>&nbsp;<font color="#4ec9b0">VARCHAR</font><font color="#b4b4b4">(</font><font color="#b5cea8">64</font><font color="#b4b4b4">)</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IN</font>&nbsp;<font color="#ffffff">in_runtime</font>&nbsp;<font color="#4ec9b0">INT</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IN</font>&nbsp;<font color="#ffffff">in_interval</font>&nbsp;<font color="#4ec9b0">DECIMAL</font><font color="#b4b4b4">(</font><font color="#b5cea8">2</font><font color="#b4b4b4">,</font><font color="#b5cea8">2</font><font color="#b4b4b4">)</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IN</font>&nbsp;<font color="#ffffff">in_start_fresh</font>&nbsp;<font color="#4ec9b0">BOOLEAN</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IN</font>&nbsp;<font color="#ffffff">in_auto_enable</font>&nbsp;<font color="#4ec9b0">BOOLEAN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#b4b4b4">)</font><br />&nbsp;&nbsp;<font color="#569cd6">SQL</font>&nbsp;<font color="#569cd6">SECURITY</font>&nbsp;<font color="#569cd6">INVOKER</font><br />&nbsp;&nbsp;<font color="#569cd6">MODIFIES</font>&nbsp;<font color="#569cd6">SQL</font>&nbsp;<font color="#569cd6">DATA</font><br />&nbsp;&nbsp;<font color="#569cd6">COMMENT</font>&nbsp;<font color="#d69d85">'<br />&nbsp;&nbsp;Description<br />&nbsp;&nbsp;-----------<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;Traces all instrumentation within Performance Schema for a specific<br />&nbsp;&nbsp;Statement Digest.<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;When finding a statement of interest within the<br />&nbsp;&nbsp;performance_schema.events_statements_summary_by_digest table, feed<br />&nbsp;&nbsp;the DIGEST value in to this procedure, set how long to poll for,<br />&nbsp;&nbsp;and at what interval to poll, and it will generate a report of all<br />&nbsp;&nbsp;statistics tracked within Performance Schema for that digest for the<br />&nbsp;&nbsp;interval.<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;It will also attempt to generate an EXPLAIN for the longest running<br />&nbsp;&nbsp;example of the digest during the interval. Note this may fail, as:<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;   * Performance Schema truncates long SQL_TEXT values (and hence the<br />&nbsp;&nbsp;     EXPLAIN will fail due to parse errors)<br />&nbsp;&nbsp;   * the default schema is sys (so tables that are not fully qualified<br />&nbsp;&nbsp;     in the query may not be found)<br />&nbsp;&nbsp;   * some queries such as SHOW are not supported in EXPLAIN.<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;When the EXPLAIN fails, the error will be ignored and no EXPLAIN<br />&nbsp;&nbsp;output generated.<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;Requires the SUPER privilege for "SET sql_log_bin = 0;".<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;Parameters<br />&nbsp;&nbsp;-----------<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;in_digest (VARCHAR(64)):<br />&nbsp;&nbsp;  The statement digest identifier you would like to analyze<br />&nbsp;&nbsp;in_runtime (INT):<br />&nbsp;&nbsp;  The number of seconds to run analysis for<br />&nbsp;&nbsp;in_interval (DECIMAL(2,2)):<br />&nbsp;&nbsp;  The interval (in seconds, may be fractional) at which to try<br />&nbsp;&nbsp;  and take snapshots<br />&nbsp;&nbsp;in_start_fresh (BOOLEAN):<br />&nbsp;&nbsp;  Whether to TRUNCATE the events_statements_history_long and<br />&nbsp;&nbsp;  events_stages_history_long tables before starting<br />&nbsp;&nbsp;in_auto_enable (BOOLEAN):<br />&nbsp;&nbsp;  Whether to automatically turn on required consumers<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;Example<br />&nbsp;&nbsp;-----------<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;mysql&gt; call ps_trace_statement_digest(''891ec6860f98ba46d89dd20b0c03652c'', 10, 0.1, true, true);<br />&nbsp;&nbsp;+--------------------+<br />&nbsp;&nbsp;| SUMMARY STATISTICS |<br />&nbsp;&nbsp;+--------------------+<br />&nbsp;&nbsp;| SUMMARY STATISTICS |<br />&nbsp;&nbsp;+--------------------+<br />&nbsp;&nbsp;1 row in set (9.11 sec)<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;+------------+-----------+-----------+-----------+---------------+------------+------------+<br />&nbsp;&nbsp;| executions | exec_time | lock_time | rows_sent | rows_examined | tmp_tables | full_scans |<br />&nbsp;&nbsp;+------------+-----------+-----------+-----------+---------------+------------+------------+<br />&nbsp;&nbsp;|         21 | 4.11 ms   | 2.00 ms   |         0 |            21 |          0 |          0 |<br />&nbsp;&nbsp;+------------+-----------+-----------+-----------+---------------+------------+------------+<br />&nbsp;&nbsp;1 row in set (9.11 sec)<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;+------------------------------------------+-------+-----------+<br />&nbsp;&nbsp;| event_name                               | count | latency   |<br />&nbsp;&nbsp;+------------------------------------------+-------+-----------+<br />&nbsp;&nbsp;| stage/sql/checking query cache for query |    16 | 724.37 us |<br />&nbsp;&nbsp;| stage/sql/statistics                     |    16 | 546.92 us |<br />&nbsp;&nbsp;| stage/sql/freeing items                  |    18 | 520.11 us |<br />&nbsp;&nbsp;| stage/sql/init                           |    51 | 466.80 us |<br />&nbsp;&nbsp;...<br />&nbsp;&nbsp;| stage/sql/cleaning up                    |    18 | 11.92 us  |<br />&nbsp;&nbsp;| stage/sql/executing                      |    16 | 6.95 us   |<br />&nbsp;&nbsp;+------------------------------------------+-------+-----------+<br />&nbsp;&nbsp;17 rows in set (9.12 sec)<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;+---------------------------+<br />&nbsp;&nbsp;| LONGEST RUNNING STATEMENT |<br />&nbsp;&nbsp;+---------------------------+<br />&nbsp;&nbsp;| LONGEST RUNNING STATEMENT |<br />&nbsp;&nbsp;+---------------------------+<br />&nbsp;&nbsp;1 row in set (9.16 sec)<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;+-----------+-----------+-----------+-----------+---------------+------------+-----------+<br />&nbsp;&nbsp;| thread_id | exec_time | lock_time | rows_sent | rows_examined | tmp_tables | full_scan |<br />&nbsp;&nbsp;+-----------+-----------+-----------+-----------+---------------+------------+-----------+<br />&nbsp;&nbsp;|    166646 | 618.43 us | 1.00 ms   |         0 |             1 |          0 |         0 |<br />&nbsp;&nbsp;+-----------+-----------+-----------+-----------+---------------+------------+-----------+<br />&nbsp;&nbsp;1 row in set (9.16 sec)<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;// Truncated for clarity...<br />&nbsp;&nbsp;+-----------------------------------------------------------------+<br />&nbsp;&nbsp;| sql_text                                                        |<br />&nbsp;&nbsp;+-----------------------------------------------------------------+<br />&nbsp;&nbsp;| select hibeventhe0_.id as id1382_, hibeventhe0_.createdTime ... |<br />&nbsp;&nbsp;+-----------------------------------------------------------------+<br />&nbsp;&nbsp;1 row in set (9.17 sec)<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;+------------------------------------------+-----------+<br />&nbsp;&nbsp;| event_name                               | latency   |<br />&nbsp;&nbsp;+------------------------------------------+-----------+<br />&nbsp;&nbsp;| stage/sql/init                           | 8.61 us   |<br />&nbsp;&nbsp;| stage/sql/Waiting for query cache lock   | 453.23 us |<br />&nbsp;&nbsp;| stage/sql/init                           | 331.07 ns |<br />&nbsp;&nbsp;| stage/sql/checking query cache for query | 43.04 us  |<br />&nbsp;&nbsp;...<br />&nbsp;&nbsp;| stage/sql/freeing items                  | 30.46 us  |<br />&nbsp;&nbsp;| stage/sql/cleaning up                    | 662.13 ns |<br />&nbsp;&nbsp;+------------------------------------------+-----------+<br />&nbsp;&nbsp;18 rows in set (9.23 sec)<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;+----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+<br />&nbsp;&nbsp;| id | select_type | table        | type  | possible_keys | key       | key_len | ref         | rows | Extra |<br />&nbsp;&nbsp;+----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+<br />&nbsp;&nbsp;|  1 | SIMPLE      | hibeventhe0_ | const | fixedTime     | fixedTime | 775     | const,const |    1 | NULL  |<br />&nbsp;&nbsp;+----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+<br />&nbsp;&nbsp;1 row in set (9.27 sec)<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;Query OK, 0 rows affected (9.28 sec)<br />&nbsp;&nbsp;'</font><br /><font color="#569cd6">BEGIN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DECLARE</font>&nbsp;<font color="#ffffff">v_start_fresh</font>&nbsp;<font color="#4ec9b0">BOOLEAN</font>&nbsp;<font color="#569cd6">DEFAULT</font>&nbsp;<font color="#569cd6">false</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DECLARE</font>&nbsp;<font color="#ffffff">v_auto_enable</font>&nbsp;<font color="#4ec9b0">BOOLEAN</font>&nbsp;<font color="#569cd6">DEFAULT</font>&nbsp;<font color="#569cd6">false</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DECLARE</font>&nbsp;<font color="#ffffff">v_explain</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">BOOLEAN</font>&nbsp;<font color="#569cd6">DEFAULT</font>&nbsp;<font color="#569cd6">true</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DECLARE</font>&nbsp;<font color="#ffffff">v_this_thread_enabed</font>&nbsp;<font color="#4ec9b0">ENUM</font><font color="#b4b4b4">(</font><font color="#d69d85">'YES'</font><font color="#b4b4b4">,</font>&nbsp;<font color="#d69d85">'NO'</font><font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DECLARE</font>&nbsp;<font color="#ffffff">v_runtime</font>&nbsp;<font color="#4ec9b0">INT</font>&nbsp;<font color="#569cd6">DEFAULT</font>&nbsp;<font color="#b5cea8">0</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DECLARE</font>&nbsp;<font color="#ffffff">v_start</font>&nbsp;<font color="#4ec9b0">INT</font>&nbsp;<font color="#569cd6">DEFAULT</font>&nbsp;<font color="#b5cea8">0</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DECLARE</font>&nbsp;<font color="#ffffff">v_found_stmts</font>&nbsp;<font color="#4ec9b0">INT</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#008080">@log_bin</font>&nbsp;<font color="#b4b4b4">:=</font>&nbsp;<font color="#ff00ff">@@sql_log_bin</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#ffffff">sql_log_bin</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#b5cea8">0</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- Do not track the current thread, it will kill the stack</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">INSTRUMENTED</font>&nbsp;<font color="#569cd6">INTO</font>&nbsp;<font color="#ffffff">v_this_thread_enabed</font>&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#569cd6">performance_schema</font><font color="#b4b4b4">.</font><font color="#ffffff">threads</font>&nbsp;<font color="#569cd6">WHERE</font>&nbsp;<font color="#ffffff">PROCESSLIST_ID</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#ff00ff">CONNECTION_ID</font><font color="#b4b4b4">(</font><font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">CALL</font>&nbsp;<font color="#ffffff">sys</font><font color="#b4b4b4">.</font><font color="#ffffff">ps_setup_disable_thread</font><font color="#b4b4b4">(</font><font color="#ff00ff">CONNECTION_ID</font><font color="#b4b4b4">(</font><font color="#b4b4b4">)</font><font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DROP</font>&nbsp;<font color="#569cd6">TEMPORARY</font>&nbsp;<font color="#569cd6">TABLE</font>&nbsp;<font color="#569cd6">IF</font>&nbsp;<font color="#569cd6">EXISTS</font>&nbsp;<font color="#ffffff">stmt_trace</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">CREATE</font>&nbsp;<font color="#569cd6">TEMPORARY</font>&nbsp;<font color="#569cd6">TABLE</font>&nbsp;<font color="#ffffff">stmt_trace</font>&nbsp;<font color="#b4b4b4">(</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">thread_id</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">timer_start</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">event_id</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">sql_text</font>&nbsp;<font color="#4ec9b0">longtext</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">timer_wait</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">lock_time</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">errors</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">mysql_errno</font>&nbsp;<font color="#4ec9b0">INT</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">rows_sent</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">rows_affected</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">rows_examined</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">created_tmp_tables</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">created_tmp_disk_tables</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">no_index_used</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">PRIMARY</font>&nbsp;<font color="#569cd6">KEY</font>&nbsp;<font color="#b4b4b4">(</font><font color="#ffffff">thread_id</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">timer_start</font><font color="#b4b4b4">)</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DROP</font>&nbsp;<font color="#569cd6">TEMPORARY</font>&nbsp;<font color="#569cd6">TABLE</font>&nbsp;<font color="#569cd6">IF</font>&nbsp;<font color="#569cd6">EXISTS</font>&nbsp;<font color="#ffffff">stmt_stages</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">CREATE</font>&nbsp;<font color="#569cd6">TEMPORARY</font>&nbsp;<font color="#569cd6">TABLE</font>&nbsp;<font color="#ffffff">stmt_stages</font>&nbsp;<font color="#b4b4b4">(</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">event_id</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">stmt_id</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">event_name</font>&nbsp;<font color="#4ec9b0">VARCHAR</font><font color="#b4b4b4">(</font><font color="#b5cea8">128</font><font color="#b4b4b4">)</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">timer_wait</font>&nbsp;<font color="#4ec9b0">BIGINT</font>&nbsp;<font color="#569cd6">UNSIGNED</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">PRIMARY</font>&nbsp;<font color="#569cd6">KEY</font>&nbsp;<font color="#b4b4b4">(</font><font color="#ffffff">event_id</font><font color="#b4b4b4">)</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#ffffff">v_start_fresh</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#ffffff">in_start_fresh</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IF</font>&nbsp;<font color="#ffffff">v_start_fresh</font>&nbsp;<font color="#569cd6">THEN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">TRUNCATE</font>&nbsp;<font color="#569cd6">TABLE</font>&nbsp;<font color="#569cd6">performance_schema</font><font color="#b4b4b4">.</font><font color="#ffffff">events_statements_history_long</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">TRUNCATE</font>&nbsp;<font color="#569cd6">TABLE</font>&nbsp;<font color="#569cd6">performance_schema</font><font color="#b4b4b4">.</font><font color="#ffffff">events_stages_history_long</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">END</font>&nbsp;<font color="#569cd6">IF</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#ffffff">v_auto_enable</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#ffffff">in_auto_enable</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IF</font>&nbsp;<font color="#ffffff">v_auto_enable</font>&nbsp;<font color="#569cd6">THEN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">CALL</font>&nbsp;<font color="#ffffff">sys</font><font color="#b4b4b4">.</font><font color="#ffffff">ps_setup_save</font><font color="#b4b4b4">(</font><font color="#b5cea8">0</font><font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">UPDATE</font>&nbsp;<font color="#569cd6">performance_schema</font><font color="#b4b4b4">.</font><font color="#ffffff">threads</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#ffffff">INSTRUMENTED</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#569cd6">IF</font><font color="#b4b4b4">(</font><font color="#ffffff">PROCESSLIST_ID</font>&nbsp;<font color="#569cd6">IS</font>&nbsp;<font color="#b4b4b4">NOT</font>&nbsp;<font color="#569cd6">NULL</font><font color="#b4b4b4">,</font>&nbsp;<font color="#d69d85">'YES'</font><font color="#b4b4b4">,</font>&nbsp;<font color="#d69d85">'NO'</font><font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- Only the events_statements_history_long and events_stages_history_long tables and their ancestors are needed</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">UPDATE</font>&nbsp;<font color="#569cd6">performance_schema</font><font color="#b4b4b4">.</font><font color="#ffffff">setup_consumers</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#ffffff">ENABLED</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#d69d85">'YES'</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">WHERE</font>&nbsp;<font color="#569cd6">NAME</font>&nbsp;<font color="#b4b4b4">NOT</font>&nbsp;<font color="#569cd6">LIKE</font>&nbsp;<font color="#d69d85">'%\_history'</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">AND</font>&nbsp;<font color="#569cd6">NAME</font>&nbsp;<font color="#b4b4b4">NOT</font>&nbsp;<font color="#569cd6">LIKE</font>&nbsp;<font color="#d69d85">'events_wait%'</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">AND</font>&nbsp;<font color="#569cd6">NAME</font>&nbsp;<font color="#b4b4b4">NOT</font>&nbsp;<font color="#569cd6">LIKE</font>&nbsp;<font color="#d69d85">'events_transactions%'</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">AND</font>&nbsp;<font color="#569cd6">NAME</font>&nbsp;<font color="#b4b4b4"><></font>&nbsp;<font color="#d69d85">'statements_digest'</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">UPDATE</font>&nbsp;<font color="#569cd6">performance_schema</font><font color="#b4b4b4">.</font><font color="#ffffff">setup_instruments</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#ffffff">ENABLED</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#d69d85">'YES'</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">TIMED</font>&nbsp;&nbsp;&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#d69d85">'YES'</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">WHERE</font>&nbsp;<font color="#569cd6">NAME</font>&nbsp;<font color="#569cd6">LIKE</font>&nbsp;<font color="#d69d85">'statement/%'</font>&nbsp;<font color="#b4b4b4">OR</font>&nbsp;<font color="#569cd6">NAME</font>&nbsp;<font color="#569cd6">LIKE</font>&nbsp;<font color="#d69d85">'stage/%'</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">END</font>&nbsp;<font color="#569cd6">IF</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">WHILE</font>&nbsp;<font color="#ffffff">v_runtime</font>&nbsp;<font color="#b4b4b4"><</font>&nbsp;<font color="#ffffff">in_runtime</font>&nbsp;<font color="#569cd6">DO</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ff00ff">UNIX_TIMESTAMP</font><font color="#b4b4b4">(</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">INTO</font>&nbsp;<font color="#ffffff">v_start</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">INSERT</font>&nbsp;<font color="#569cd6">IGNORE</font>&nbsp;<font color="#569cd6">INTO</font>&nbsp;<font color="#ffffff">stmt_trace</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">thread_id</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">timer_start</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">event_id</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">sql_text</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">timer_wait</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">lock_time</font><font color="#b4b4b4">,</font>&nbsp;<font color="#569cd6">errors</font><font color="#b4b4b4">,</font>&nbsp;<font color="#569cd6">mysql_errno</font><font color="#b4b4b4">,</font>&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">rows_sent</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">rows_affected</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">rows_examined</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">created_tmp_tables</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">created_tmp_disk_tables</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">no_index_used</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#569cd6">performance_schema</font><font color="#b4b4b4">.</font><font color="#ffffff">events_statements_history_long</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">WHERE</font>&nbsp;<font color="#ffffff">digest</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#ffffff">in_digest</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">INSERT</font>&nbsp;<font color="#569cd6">IGNORE</font>&nbsp;<font color="#569cd6">INTO</font>&nbsp;<font color="#ffffff">stmt_stages</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">stages</font><font color="#b4b4b4">.</font><font color="#ffffff">event_id</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">stmt_trace</font><font color="#b4b4b4">.</font><font color="#ffffff">event_id</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">stages</font><font color="#b4b4b4">.</font><font color="#ffffff">event_name</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">stages</font><font color="#b4b4b4">.</font><font color="#ffffff">timer_wait</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#569cd6">performance_schema</font><font color="#b4b4b4">.</font><font color="#ffffff">events_stages_history_long</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">stages</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">JOIN</font>&nbsp;<font color="#ffffff">stmt_trace</font>&nbsp;<font color="#569cd6">ON</font>&nbsp;<font color="#ffffff">stages</font><font color="#b4b4b4">.</font><font color="#ffffff">nesting_event_id</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#ffffff">stmt_trace</font><font color="#b4b4b4">.</font><font color="#ffffff">event_id</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ff00ff">SLEEP</font><font color="#b4b4b4">(</font><font color="#ffffff">in_interval</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">INTO</font>&nbsp;<font color="#008080">@sleep</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#ffffff">v_runtime</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#ffffff">v_runtime</font>&nbsp;<font color="#b4b4b4">+</font>&nbsp;<font color="#b4b4b4">(</font><font color="#ff00ff">UNIX_TIMESTAMP</font><font color="#b4b4b4">(</font><font color="#b4b4b4">)</font>&nbsp;<font color="#b4b4b4">-</font>&nbsp;<font color="#ffffff">v_start</font><font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">END</font>&nbsp;<font color="#569cd6">WHILE</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">"SUMMARY STATISTICS"</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ff00ff">COUNT</font><font color="#b4b4b4">(</font><font color="#b4b4b4">*</font><font color="#b4b4b4">)</font>&nbsp;<font color="#ffffff">executions</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">format_pico_time</font><font color="#b4b4b4">(</font><font color="#ff00ff">SUM</font><font color="#b4b4b4">(</font><font color="#ffffff">timer_wait</font><font color="#b4b4b4">)</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">exec_time</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">format_pico_time</font><font color="#b4b4b4">(</font><font color="#ff00ff">SUM</font><font color="#b4b4b4">(</font><font color="#ffffff">lock_time</font><font color="#b4b4b4">)</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">lock_time</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">SUM</font><font color="#b4b4b4">(</font><font color="#ffffff">rows_sent</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">rows_sent</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">SUM</font><font color="#b4b4b4">(</font><font color="#ffffff">rows_affected</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">rows_affected</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">SUM</font><font color="#b4b4b4">(</font><font color="#ffffff">rows_examined</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">rows_examined</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">SUM</font><font color="#b4b4b4">(</font><font color="#ffffff">created_tmp_tables</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">tmp_tables</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">SUM</font><font color="#b4b4b4">(</font><font color="#ffffff">no_index_used</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">full_scans</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#ffffff">stmt_trace</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">event_name</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ff00ff">COUNT</font><font color="#b4b4b4">(</font><font color="#b4b4b4">*</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">as</font>&nbsp;<font color="#ff00ff">count</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">format_pico_time</font><font color="#b4b4b4">(</font><font color="#ff00ff">SUM</font><font color="#b4b4b4">(</font><font color="#ffffff">timer_wait</font><font color="#b4b4b4">)</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">as</font>&nbsp;<font color="#ffffff">latency</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#ffffff">stmt_stages</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">GROUP</font>&nbsp;<font color="#569cd6">BY</font>&nbsp;<font color="#ffffff">event_name</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">ORDER</font>&nbsp;<font color="#569cd6">BY</font>&nbsp;<font color="#ff00ff">SUM</font><font color="#b4b4b4">(</font><font color="#ffffff">timer_wait</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">DESC</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">"LONGEST RUNNING STATEMENT"</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">thread_id</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">format_pico_time</font><font color="#b4b4b4">(</font><font color="#ffffff">timer_wait</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">exec_time</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">format_pico_time</font><font color="#b4b4b4">(</font><font color="#ffffff">lock_time</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">lock_time</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">rows_sent</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">rows_affected</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">rows_examined</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">created_tmp_tables</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">tmp_tables</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">no_index_used</font>&nbsp;<font color="#569cd6">AS</font>&nbsp;<font color="#ffffff">full_scan</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#ffffff">stmt_trace</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">ORDER</font>&nbsp;<font color="#569cd6">BY</font>&nbsp;<font color="#ffffff">timer_wait</font>&nbsp;<font color="#569cd6">DESC</font>&nbsp;<font color="#569cd6">LIMIT</font>&nbsp;<font color="#b5cea8">1</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">sql_text</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#ffffff">stmt_trace</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">ORDER</font>&nbsp;<font color="#569cd6">BY</font>&nbsp;<font color="#ffffff">timer_wait</font>&nbsp;<font color="#569cd6">DESC</font>&nbsp;<font color="#569cd6">LIMIT</font>&nbsp;<font color="#b5cea8">1</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">sql_text</font><font color="#b4b4b4">,</font>&nbsp;<font color="#ffffff">event_id</font>&nbsp;<font color="#569cd6">INTO</font>&nbsp;<font color="#008080">@sql</font><font color="#b4b4b4">,</font>&nbsp;<font color="#008080">@sql_id</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#ffffff">stmt_trace</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">ORDER</font>&nbsp;<font color="#569cd6">BY</font>&nbsp;<font color="#ffffff">timer_wait</font>&nbsp;<font color="#569cd6">DESC</font>&nbsp;<font color="#569cd6">LIMIT</font>&nbsp;<font color="#b5cea8">1</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IF</font>&nbsp;<font color="#b4b4b4">(</font><font color="#008080">@sql_id</font>&nbsp;<font color="#569cd6">IS</font>&nbsp;<font color="#b4b4b4">NOT</font>&nbsp;<font color="#569cd6">NULL</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">THEN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">SELECT</font>&nbsp;<font color="#ffffff">event_name</font><font color="#b4b4b4">,</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffffff">format_pico_time</font><font color="#b4b4b4">(</font><font color="#ffffff">timer_wait</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">as</font>&nbsp;<font color="#ffffff">latency</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#ffffff">stmt_stages</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">WHERE</font>&nbsp;<font color="#ffffff">stmt_id</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#008080">@sql_id</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">ORDER</font>&nbsp;<font color="#569cd6">BY</font>&nbsp;<font color="#ffffff">event_id</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">END</font>&nbsp;<font color="#569cd6">IF</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DROP</font>&nbsp;<font color="#569cd6">TEMPORARY</font>&nbsp;<font color="#569cd6">TABLE</font>&nbsp;<font color="#ffffff">stmt_trace</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DROP</font>&nbsp;<font color="#569cd6">TEMPORARY</font>&nbsp;<font color="#569cd6">TABLE</font>&nbsp;<font color="#ffffff">stmt_stages</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IF</font>&nbsp;<font color="#b4b4b4">(</font><font color="#008080">@sql</font>&nbsp;<font color="#569cd6">IS</font>&nbsp;<font color="#b4b4b4">NOT</font>&nbsp;<font color="#569cd6">NULL</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">THEN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#008080">@stmt</font>&nbsp;<font color="#b4b4b4">:=</font>&nbsp;<font color="#ff00ff">CONCAT</font><font color="#b4b4b4">(</font><font color="#ffffff">"EXPLAIN FORMAT=JSON "</font><font color="#b4b4b4">,</font>&nbsp;<font color="#008080">@sql</font><font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">BEGIN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- Not all queries support EXPLAIN, so catch the cases that are</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- not supported. Currently that includes cases where the table</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- is not fully qualified and is not in the default schema for this</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- procedure as it's not possible to change the default schema inside</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- a procedure.</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">--</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- Errno = 1064: You have an error in your SQL syntax</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- Errno = 1146: Table '...' doesn't exist</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DECLARE</font>&nbsp;<font color="#569cd6">CONTINUE</font>&nbsp;<font color="#569cd6">HANDLER</font>&nbsp;<font color="#569cd6">FOR</font>&nbsp;<font color="#b5cea8">1064</font><font color="#b4b4b4">,</font>&nbsp;<font color="#b5cea8">1146</font>&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#ffffff">v_explain</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#569cd6">false</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">PREPARE</font>&nbsp;<font color="#ffffff">explain_stmt</font>&nbsp;<font color="#569cd6">FROM</font>&nbsp;<font color="#008080">@stmt</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">END</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IF</font>&nbsp;<font color="#b4b4b4">(</font><font color="#ffffff">v_explain</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">THEN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">EXECUTE</font>&nbsp;<font color="#ffffff">explain_stmt</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">DEALLOCATE</font>&nbsp;<font color="#569cd6">PREPARE</font>&nbsp;<font color="#ffffff">explain_stmt</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">END</font>&nbsp;<font color="#569cd6">IF</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">END</font>&nbsp;<font color="#569cd6">IF</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IF</font>&nbsp;<font color="#ffffff">v_auto_enable</font>&nbsp;<font color="#569cd6">THEN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">CALL</font>&nbsp;<font color="#ffffff">sys</font><font color="#b4b4b4">.</font><font color="#ffffff">ps_setup_reload_saved</font><font color="#b4b4b4">(</font><font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">END</font>&nbsp;<font color="#569cd6">IF</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#608b4e">-- Restore INSTRUMENTED for this thread</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">IF</font>&nbsp;<font color="#b4b4b4">(</font><font color="#ffffff">v_this_thread_enabed</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#d69d85">'YES'</font><font color="#b4b4b4">)</font>&nbsp;<font color="#569cd6">THEN</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">CALL</font>&nbsp;<font color="#ffffff">sys</font><font color="#b4b4b4">.</font><font color="#ffffff">ps_setup_enable_thread</font><font color="#b4b4b4">(</font><font color="#ff00ff">CONNECTION_ID</font><font color="#b4b4b4">(</font><font color="#b4b4b4">)</font><font color="#b4b4b4">)</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#569cd6">END</font>&nbsp;<font color="#569cd6">IF</font><font color="#b4b4b4">;</font><br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#4ec9b0">SET</font>&nbsp;<font color="#ffffff">sql_log_bin</font>&nbsp;<font color="#b4b4b4">=</font>&nbsp;<font color="#008080">@log_bin</font><font color="#b4b4b4">;</font><br /><font color="#569cd6">END</font></div>
          </div>
        </div>
      </div>
      <div id="DependsOn" class="panel panel-default">
        <div class="panel-heading">
          <span class="icon-bottom inline-middle expanded icon-small"></span>
          <span class="icon-right inline-middle collapsed icon-small" style="display:none"></span>
          <h2 class="inline-middle">Depends On</h2>
          <span class="badge inline-middle">4</span>
        </div>
        <div class="panel-collapse collapse in">
          <div class="panel-body">
            <ul class="items-list">
              <li><a href="../../../../../Servers\Cars.localhost\Databases\sys\Procedures\ps_setup_disable_thread.html" data-mapping-enabled="true"><img src="../../../../../images/Dark\procedure.svg" class="image-small" />
              <span>ps_setup_disable_thread</span></a></li>
              <li><a href="../../../../../Servers\Cars.localhost\Databases\sys\Procedures\ps_setup_save.html" data-mapping-enabled="true"><img src="../../../../../images/Dark\procedure.svg" class="image-small" />
              <span>ps_setup_save</span></a></li>
              <li><a href="../../../../../Servers\Cars.localhost\Databases\sys\Procedures\ps_setup_reload_saved.html" data-mapping-enabled="true"><img src="../../../../../images/Dark\procedure.svg" class="image-small" />
              <span>ps_setup_reload_saved</span></a></li>
              <li><a href="../../../../../Servers\Cars.localhost\Databases\sys\Procedures\ps_setup_enable_thread.html" data-mapping-enabled="true"><img src="../../../../../images/Dark\procedure.svg" class="image-small" />
              <span>ps_setup_enable_thread</span></a></li>
            </ul>
          </div>
        </div>
      </div>
      <div id="UsedBy" class="panel panel-default">
        <div class="panel-heading">
          <span class="icon-bottom inline-middle expanded icon-small"></span>
          <span class="icon-right inline-middle collapsed icon-small" style="display:none"></span>
          <h2 class="inline-middle">Used By</h2>
        </div>
        <div class="panel-collapse collapse in">
          <div class="panel-body">
            <span class="text-muted">No items found</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="col-xs-4">Author:&nbsp;</div>
    <div class="col-xs-4 align-center">Copyright &#169; All Rights Reserved</div>
    <div class="col-xs-4 align-right">Created:&nbsp;10. 04. 2021</div>
  </div>
</body>
</html>