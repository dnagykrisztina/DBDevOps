<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><title>Sales.SalesOrderDetail</title><link rel="stylesheet" href="../../../../Style/Master.css" type="text/css"><script src="../../../../Scripts/jquery-1.9.1.js" type="text/javascript"></script><script src="../../../../Scripts/sections.js" type="text/javascript"></script></head><body><div id="wrap"><div id="container"><div id="header"><div id="breadcrumbs"><a href="../../../../index.html">Project</a> &gt; <a href="../../../../localhost/index.html">localhost</a> &gt; <a href="../../../../localhost/User_databases/index.html">User databases</a> &gt; <a href="../../../../localhost/User_databases/AdventureWorks2016/index.html">AdventureWorks2016</a> &gt; <a href="../../../../localhost/User_databases/AdventureWorks2016/Tables/Tables.html">Tables</a> &gt; Sales.SalesOrderDetail</div><div id="headerText"></div></div><div id="pageTitle"><img src="../../../../Images/Table32.png" alt="Tables" title="Tables" class="Table32"> [Sales].[SalesOrderDetail]</div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="description">MS_Description</a></div><div class="panel-body">Individual products associated with a specific sales order. See SalesOrderHeader.</div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="properties">Properties</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Property</th><th>Value</th></tr><tr><td>Collation</td><td>SQL_Latin1_General_CP1_CI_AS</td></tr><tr><td>Row Count (~)</td><td>121317</td></tr><tr><td>Created</td><td>17:24:40 2017. okt&#243;ber 19., cs&#252;t&#246;rt&#246;k</td></tr><tr><td>Last Modified</td><td>17:24:52 2017. okt&#243;ber 19., cs&#252;t&#246;rt&#246;k</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="columns">Columns</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Key</th><th>Name</th><th>Data Type</th><th>Computed</th><th>Max Length (Bytes)</th><th>Nullability</th><th>Identity</th><th>Default</th><th>Description</th></tr><tr><td><a href="#indexes"><img src="../../../../Images/pkcluster.png" alt="Cluster Primary Key PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID: SalesOrderID\SalesOrderDetailID" title="Cluster Primary Key PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID: SalesOrderID\SalesOrderDetailID" class="pkcluster"></a><a href="#foreignkeys"><img src="../../../../Images/fk.png" alt="Foreign Keys FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID: [Sales].[SalesOrderHeader].SalesOrderID" title="Foreign Keys FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID: [Sales].[SalesOrderHeader].SalesOrderID" class="fk"></a></td><td>SalesOrderID</td><td>int</td><td></td><td>4</td><td>NOT NULL</td><td></td><td></td><td>Primary key. Foreign key to SalesOrderHeader.SalesOrderID.</td></tr><tr><td><a href="#indexes"><img src="../../../../Images/pkcluster.png" alt="Cluster Primary Key PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID: SalesOrderID\SalesOrderDetailID" title="Cluster Primary Key PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID: SalesOrderID\SalesOrderDetailID" class="pkcluster"></a></td><td>SalesOrderDetailID</td><td>int</td><td></td><td>4</td><td>NOT NULL</td><td>1 - 1</td><td></td><td>Primary key. One incremental unique number per product sold.</td></tr><tr><td></td><td>CarrierTrackingNumber</td><td>nvarchar(25)</td><td></td><td>50</td><td>NULL allowed</td><td></td><td></td><td>Shipment tracking number supplied by the shipper.</td></tr><tr><td><a href="#checkconstraints"><img src="../../../../Images/c-constraint.png" alt="Check Constraints CK_SalesOrderDetail_OrderQty : ([OrderQty]>(0))" title="Check Constraints CK_SalesOrderDetail_OrderQty : ([OrderQty]>(0))" class="c-constraint"></a></td><td>OrderQty</td><td>smallint</td><td></td><td>2</td><td>NOT NULL</td><td></td><td></td><td>Quantity ordered per product.</td></tr><tr><td><a href="#indexes"><img src="../../../../Images/Index.png" alt="Indexes IX_SalesOrderDetail_ProductID" title="Indexes IX_SalesOrderDetail_ProductID" class="Index"></a><a href="#foreignkeys"><img src="../../../../Images/fk.png" alt="Foreign Keys FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID: [Sales].[SpecialOfferProduct].SpecialOfferID\ProductID" title="Foreign Keys FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID: [Sales].[SpecialOfferProduct].SpecialOfferID\ProductID" class="fk"></a></td><td>ProductID</td><td>int</td><td></td><td>4</td><td>NOT NULL</td><td></td><td></td><td>Product sold to customer. Foreign key to Product.ProductID.</td></tr><tr><td><a href="#foreignkeys"><img src="../../../../Images/fk.png" alt="Foreign Keys FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID: [Sales].[SpecialOfferProduct].SpecialOfferID\ProductID" title="Foreign Keys FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID: [Sales].[SpecialOfferProduct].SpecialOfferID\ProductID" class="fk"></a></td><td>SpecialOfferID</td><td>int</td><td></td><td>4</td><td>NOT NULL</td><td></td><td></td><td>Promotional code. Foreign key to SpecialOffer.SpecialOfferID.</td></tr><tr><td><a href="#checkconstraints"><img src="../../../../Images/c-constraint.png" alt="Check Constraints CK_SalesOrderDetail_UnitPrice : ([UnitPrice]>=(0.00))" title="Check Constraints CK_SalesOrderDetail_UnitPrice : ([UnitPrice]>=(0.00))" class="c-constraint"></a></td><td>UnitPrice</td><td>money</td><td></td><td>8</td><td>NOT NULL</td><td></td><td></td><td>Selling price of a single product.</td></tr><tr><td><a href="#checkconstraints"><img src="../../../../Images/c-constraint.png" alt="Check Constraints CK_SalesOrderDetail_UnitPriceDiscount : ([UnitPriceDiscount]>=(0.00))" title="Check Constraints CK_SalesOrderDetail_UnitPriceDiscount : ([UnitPriceDiscount]>=(0.00))" class="c-constraint"></a></td><td>UnitPriceDiscount</td><td>money</td><td></td><td>8</td><td>NOT NULL</td><td></td><td>((0.0))</td><td>Discount amount.</td></tr><tr><td></td><td>LineTotal</td><td>numeric(38,6)</td><td><div class="tick"><span class="do-yes">True</span></div></td><td>17</td><td>NOT NULL</td><td></td><td></td><td>Per product subtotal. Computed as UnitPrice * (1 - UnitPriceDiscount) * OrderQty.</td></tr><tr><td><a href="#indexes"><img src="../../../../Images/Index.png" alt="Indexes AK_SalesOrderDetail_rowguid" title="Indexes AK_SalesOrderDetail_rowguid" class="Index"></a></td><td>rowguid</td><td>uniqueidentifier</td><td></td><td>16</td><td>NOT NULL</td><td></td><td>(newid())</td><td>ROWGUIDCOL number uniquely identifying the record. Used to support a merge replication sample.</td></tr><tr><td></td><td>ModifiedDate</td><td>datetime</td><td></td><td>8</td><td>NOT NULL</td><td></td><td>(getdate())</td><td>Date and time the record was last updated.</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="computedcolumns">Computed columns</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Name</th><th>Column definition</th></tr><tr><td>LineTotal</td><td>(isnull(([UnitPrice]*((1.0)-[UnitPriceDiscount]))*[OrderQty],(0.0)))</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="indexes">Indexes</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Key</th><th>Name</th><th>Key Columns</th><th>Unique</th><th>Description</th></tr><tr><td><a href="#indexes"><img src="../../../../Images/pkcluster.png" alt="Cluster Primary Key PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID: SalesOrderID\SalesOrderDetailID" title="Cluster Primary Key PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID: SalesOrderID\SalesOrderDetailID" class="pkcluster"></a></td><td>PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID</td><td>SalesOrderID, SalesOrderDetailID</td><td><div class="tick"><span class="do-yes">True</span></div></td><td>Primary key (clustered) constraint</td></tr><tr><td></td><td>AK_SalesOrderDetail_rowguid</td><td>rowguid</td><td><div class="tick"><span class="do-yes">True</span></div></td><td>Unique nonclustered index. Used to support replication samples.</td></tr><tr><td></td><td>IX_SalesOrderDetail_ProductID</td><td>ProductID</td><td></td><td>Nonclustered index.</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="triggers">Triggers</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Name</th><th>ANSI Nulls On</th><th>Quoted Identifier On</th><th>On</th><th>Description</th></tr><tr><td>iduSalesOrderDetail</td><td><div class="tick"><span class="do-yes">True</span></div></td><td><div class="tick"><span class="do-yes">True</span></div></td><td>After Delete Insert Update</td><td>AFTER INSERT, DELETE, UPDATE trigger that inserts a row in the TransactionHistory table, updates ModifiedDate in SalesOrderDetail and updates the SalesOrderHeader.SubTotal column.</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="checkconstraints">Check Constraints</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Name</th><th>On Column</th><th>Constraint</th><th>Description</th></tr><tr><td>CK_SalesOrderDetail_OrderQty</td><td>OrderQty</td><td>([OrderQty]&gt;(0))</td><td>Check constraint [OrderQty] &gt; (0)</td></tr><tr><td>CK_SalesOrderDetail_UnitPrice</td><td>UnitPrice</td><td>([UnitPrice]&gt;=(0.00))</td><td>Check constraint [UnitPrice] &gt;= (0.00)</td></tr><tr><td>CK_SalesOrderDetail_UnitPriceDiscount</td><td>UnitPriceDiscount</td><td>([UnitPriceDiscount]&gt;=(0.00))</td><td>Check constraint [UnitPriceDiscount] &gt;= (0.00)</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="foreignkeys">Foreign Keys</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Name</th><th>Delete</th><th>Columns</th><th>Description</th></tr><tr><td>FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID</td><td>Cascade</td><td>SalesOrderID-&gt;<a href="../../../../localhost/User_databases/AdventureWorks2016/Tables/SalesOrderHeader.html">[Sales].[SalesOrderHeader].[SalesOrderID]</a></td><td>Foreign key constraint referencing SalesOrderHeader.PurchaseOrderID.</td></tr><tr><td>FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID</td><td></td><td>SpecialOfferID-&gt;<a href="../../../../localhost/User_databases/AdventureWorks2016/Tables/SpecialOfferProduct.html">[Sales].[SpecialOfferProduct].[SpecialOfferID]</a><br>ProductID-&gt;<a href="../../../../localhost/User_databases/AdventureWorks2016/Tables/SpecialOfferProduct.html">[Sales].[SpecialOfferProduct].[ProductID]</a></td><td>Foreign key constraint referencing SpecialOfferProduct.SpecialOfferIDProductID.</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="sqlscript">SQL Script</a></div><div class="panel-body"><div id="sqlScript"><span class="sqlScriptsKeyword">CREATE</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span><br><span class="sqlScriptsOperator">(</span><br><span class="sqlScriptsNormal">[SalesOrderID]</span> <span class="sqlScriptsNormal">[int]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[SalesOrderDetailID]</span> <span class="sqlScriptsNormal">[int]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span> <span class="sqlScriptsKeyword">IDENTITY</span><span class="sqlScriptsOperator">(</span><span class="sqlScriptsNormal">1</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">1</span><span class="sqlScriptsNormal">),</span><br><span class="sqlScriptsNormal">[CarrierTrackingNumber]</span> <span class="sqlScriptsNormal">[nvarchar]</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsNormal">25</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">COLLATE</span> <span class="sqlScriptsNormal">SQL_Latin1_General_CP1_CI_AS</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[OrderQty]</span> <span class="sqlScriptsNormal">[smallint]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[ProductID]</span> <span class="sqlScriptsNormal">[int]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[SpecialOfferID]</span> <span class="sqlScriptsNormal">[int]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[UnitPrice]</span> <span class="sqlScriptsNormal">[money]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[UnitPriceDiscount]</span> <span class="sqlScriptsNormal">[money]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[DF_SalesOrderDetail_UnitPriceDiscount]</span> <span class="sqlScriptsKeyword">DEFAULT</span> <span class="sqlScriptsNormal">((</span><span class="sqlScriptsNormal">0.0</span><span class="sqlScriptsNormal">)),</span><br><span class="sqlScriptsNormal">[LineTotal]</span> <span class="sqlScriptsKeyword">AS</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsFunction">isnull</span><span class="sqlScriptsNormal">((</span><span class="sqlScriptsNormal">[UnitPrice]</span><span class="sqlScriptsNormal">*((</span><span class="sqlScriptsNormal">1.0</span><span class="sqlScriptsNormal">)-</span><span class="sqlScriptsNormal">[UnitPriceDiscount]</span><span class="sqlScriptsNormal">))*</span><span class="sqlScriptsNormal">[OrderQty]</span><span class="sqlScriptsNormal">,(</span><span class="sqlScriptsNormal">0.0</span><span class="sqlScriptsNormal">))),</span><br><span class="sqlScriptsNormal">[rowguid]</span> <span class="sqlScriptsNormal">[uniqueidentifier]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span> <span class="sqlScriptsKeyword">ROWGUIDCOL</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[DF_SalesOrderDetail_rowguid]</span> <span class="sqlScriptsKeyword">DEFAULT</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsFunction">newid</span><span class="sqlScriptsNormal">()),</span><br><span class="sqlScriptsNormal">[ModifiedDate]</span> <span class="sqlScriptsNormal">[datetime]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[DF_SalesOrderDetail_ModifiedDate]</span> <span class="sqlScriptsKeyword">DEFAULT</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsFunction">getdate</span><span class="sqlScriptsNormal">())</span><br><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[PRIMARY]</span><br><span class="sqlScriptsNormal">GO</span><br><br><span class="sqlScriptsKeyword">CREATE</span> <span class="sqlScriptsKeyword">TRIGGER</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[iduSalesOrderDetail]</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span> <br><span class="sqlScriptsKeyword">AFTER</span> <span class="sqlScriptsKeyword">INSERT</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsKeyword">DELETE</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsKeyword">UPDATE</span> <span class="sqlScriptsKeyword">AS</span> <br><span class="sqlScriptsKeyword">BEGIN</span><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">DECLARE</span> <span class="sqlScriptsNormal">@Count</span> <span class="sqlScriptsKeyword">int</span><span class="sqlScriptsNormal">;</span><br><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">SET</span> <span class="sqlScriptsNormal">@Count</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsFunction">@@ROWCOUNT</span><span class="sqlScriptsNormal">;</span><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">IF</span> <span class="sqlScriptsNormal">@Count</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">0</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">RETURN</span><span class="sqlScriptsNormal">;</span><br><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">SET</span> <span class="sqlScriptsKeyword">NOCOUNT</span> <span class="sqlScriptsKeyword">ON</span><span class="sqlScriptsNormal">;</span><br><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">BEGIN</span> <span class="sqlScriptsNormal">TRY</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsComment">-- If inserting or updating these columns</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">IF</span> <span class="sqlScriptsKeyword">UPDATE</span><span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[ProductID]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsOperator">OR</span> <span class="sqlScriptsKeyword">UPDATE</span><span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[OrderQty]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsOperator">OR</span> <span class="sqlScriptsKeyword">UPDATE</span><span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[UnitPrice]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsOperator">OR</span> <span class="sqlScriptsKeyword">UPDATE</span><span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[UnitPriceDiscount]</span><span class="sqlScriptsOperator">)</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsComment">-- Insert record into TransactionHistory</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">BEGIN</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">INSERT</span> <span class="sqlScriptsKeyword">INTO</span> <span class="sqlScriptsNormal">[Production]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[TransactionHistory]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[ProductID]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">[ReferenceOrderID]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">[ReferenceOrderLineID]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">[TransactionType]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">[TransactionDate]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">[Quantity]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">[ActualCost]</span><span class="sqlScriptsOperator">)</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">SELECT</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">inserted.</span><span class="sqlScriptsNormal">[ProductID]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">inserted.</span><span class="sqlScriptsNormal">[SalesOrderID]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">inserted.</span><span class="sqlScriptsNormal">[SalesOrderDetailID]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsString">&#39;S&#39;</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsFunction">GETDATE</span><span class="sqlScriptsNormal">()</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">inserted.</span><span class="sqlScriptsNormal">[OrderQty]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">,</span><span class="sqlScriptsNormal">inserted.</span><span class="sqlScriptsNormal">[UnitPrice]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">FROM</span> <span class="sqlScriptsNormal">inserted</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsOperator">INNER</span> <span class="sqlScriptsOperator">JOIN</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">inserted.</span><span class="sqlScriptsNormal">[SalesOrderID]</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderID]</span><span class="sqlScriptsNormal">;</span><br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">UPDATE</span> <span class="sqlScriptsNormal">[Person]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[Person]</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">SET</span> <span class="sqlScriptsNormal">[Demographics]</span><span class="sqlScriptsNormal">.modify</span><span class="sqlScriptsNormal">(</span><span class="sqlScriptsString">&#39;declare default element namespace <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey&quot;; <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace value of (/IndividualSurvey/TotalPurchaseYTD)[1] <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with data(/IndividualSurvey/TotalPurchaseYTD)[1] + sql:column (&quot;inserted.LineTotal&quot;)&#39;</span><span class="sqlScriptsOperator">)</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">FROM</span> <span class="sqlScriptsNormal">inserted</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsOperator">INNER</span> <span class="sqlScriptsOperator">JOIN</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span> <span class="sqlScriptsKeyword">AS</span> <span class="sqlScriptsNormal">SOH</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">inserted.</span><span class="sqlScriptsNormal">[SalesOrderID]</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">SOH.</span><span class="sqlScriptsNormal">[SalesOrderID]</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsOperator">INNER</span> <span class="sqlScriptsOperator">JOIN</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[Customer]</span> <span class="sqlScriptsKeyword">AS</span> <span class="sqlScriptsNormal">C</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">SOH.</span><span class="sqlScriptsNormal">[CustomerID]</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">C.</span><span class="sqlScriptsNormal">[CustomerID]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">WHERE</span> <span class="sqlScriptsNormal">C.</span><span class="sqlScriptsNormal">[PersonID]</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">[Person]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[Person]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[BusinessEntityID]</span><span class="sqlScriptsNormal">;</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">END</span><span class="sqlScriptsNormal">;</span><br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsComment">-- Update SubTotal in SalesOrderHeader record. Note that this causes the </span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsComment">-- SalesOrderHeader trigger to fire which will update the RevisionNumber.</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">UPDATE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">SET</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SubTotal]</span> <span class="sqlScriptsOperator">=</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsOperator">(</span><span class="sqlScriptsKeyword">SELECT</span> <span class="sqlScriptsFunction">SUM</span><span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[LineTotal]</span><span class="sqlScriptsOperator">)</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">FROM</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">WHERE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderID]</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderID]</span><span class="sqlScriptsOperator">)</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">WHERE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderID]</span> <span class="sqlScriptsOperator">IN</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsKeyword">SELECT</span> <span class="sqlScriptsNormal">inserted.</span><span class="sqlScriptsNormal">[SalesOrderID]</span> <span class="sqlScriptsKeyword">FROM</span> <span class="sqlScriptsNormal">inserted</span><span class="sqlScriptsNormal">);</span><br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">UPDATE</span> <span class="sqlScriptsNormal">[Person]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[Person]</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">SET</span> <span class="sqlScriptsNormal">[Demographics]</span><span class="sqlScriptsNormal">.modify</span><span class="sqlScriptsNormal">(</span><span class="sqlScriptsString">&#39;declare default element namespace <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey&quot;; <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace value of (/IndividualSurvey/TotalPurchaseYTD)[1] <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with data(/IndividualSurvey/TotalPurchaseYTD)[1] - sql:column(&quot;deleted.LineTotal&quot;)&#39;</span><span class="sqlScriptsOperator">)</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">FROM</span> <span class="sqlScriptsNormal">deleted</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsOperator">INNER</span> <span class="sqlScriptsOperator">JOIN</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">deleted.</span><span class="sqlScriptsNormal">[SalesOrderID]</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderID]</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsOperator">INNER</span> <span class="sqlScriptsOperator">JOIN</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[Customer]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[Customer]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[CustomerID]</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[CustomerID]</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">WHERE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[Customer]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[PersonID]</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">[Person]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[Person]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[BusinessEntityID]</span><span class="sqlScriptsNormal">;</span><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">END</span> <span class="sqlScriptsNormal">TRY</span><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">BEGIN</span> <span class="sqlScriptsNormal">CATCH</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">EXECUTE</span> <span class="sqlScriptsNormal">[dbo]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[uspPrintError]</span><span class="sqlScriptsNormal">;</span><br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsComment">-- Rollback any active or uncommittable transactions before</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsComment">-- inserting information in the ErrorLog</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">IF</span> <span class="sqlScriptsFunction">@@TRANCOUNT</span> <span class="sqlScriptsOperator">&gt;</span> <span class="sqlScriptsNormal">0</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">BEGIN</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">ROLLBACK</span> <span class="sqlScriptsKeyword">TRANSACTION</span><span class="sqlScriptsNormal">;</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">END</span><br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">EXECUTE</span> <span class="sqlScriptsNormal">[dbo]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[uspLogError]</span><span class="sqlScriptsNormal">;</span><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">END</span> <span class="sqlScriptsNormal">CATCH</span><span class="sqlScriptsNormal">;</span><br><span class="sqlScriptsKeyword">END</span><span class="sqlScriptsNormal">;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">ALTER</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span> <span class="sqlScriptsKeyword">ADD</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[CK_SalesOrderDetail_OrderQty]</span> <span class="sqlScriptsKeyword">CHECK</span> <span class="sqlScriptsNormal">((</span><span class="sqlScriptsNormal">[OrderQty]</span><span class="sqlScriptsNormal">&gt;(</span><span class="sqlScriptsNormal">0</span><span class="sqlScriptsNormal">)))</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">ALTER</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span> <span class="sqlScriptsKeyword">ADD</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[CK_SalesOrderDetail_UnitPrice]</span> <span class="sqlScriptsKeyword">CHECK</span> <span class="sqlScriptsNormal">((</span><span class="sqlScriptsNormal">[UnitPrice]</span><span class="sqlScriptsNormal">&gt;=(</span><span class="sqlScriptsNormal">0.00</span><span class="sqlScriptsNormal">)))</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">ALTER</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span> <span class="sqlScriptsKeyword">ADD</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[CK_SalesOrderDetail_UnitPriceDiscount]</span> <span class="sqlScriptsKeyword">CHECK</span> <span class="sqlScriptsNormal">((</span><span class="sqlScriptsNormal">[UnitPriceDiscount]</span><span class="sqlScriptsNormal">&gt;=(</span><span class="sqlScriptsNormal">0.00</span><span class="sqlScriptsNormal">)))</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">ALTER</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span> <span class="sqlScriptsKeyword">ADD</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID]</span> <span class="sqlScriptsKeyword">PRIMARY</span> <span class="sqlScriptsKeyword">KEY</span> <span class="sqlScriptsKeyword">CLUSTERED</span> &nbsp;<span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[SalesOrderID]</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">[SalesOrderDetailID]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[PRIMARY]</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">CREATE</span> <span class="sqlScriptsKeyword">NONCLUSTERED</span> <span class="sqlScriptsKeyword">INDEX</span> <span class="sqlScriptsNormal">[IX_SalesOrderDetail_ProductID]</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[ProductID]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[PRIMARY]</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">CREATE</span> <span class="sqlScriptsKeyword">UNIQUE</span> <span class="sqlScriptsKeyword">NONCLUSTERED</span> <span class="sqlScriptsKeyword">INDEX</span> <span class="sqlScriptsNormal">[AK_SalesOrderDetail_rowguid]</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[rowguid]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[PRIMARY]</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">ALTER</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span> <span class="sqlScriptsKeyword">ADD</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID]</span> <span class="sqlScriptsKeyword">FOREIGN</span> <span class="sqlScriptsKeyword">KEY</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[SalesOrderID]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">REFERENCES</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderHeader]</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[SalesOrderID]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsKeyword">DELETE</span> <span class="sqlScriptsKeyword">CASCADE</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">ALTER</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SalesOrderDetail]</span> <span class="sqlScriptsKeyword">ADD</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID]</span> <span class="sqlScriptsKeyword">FOREIGN</span> <span class="sqlScriptsKeyword">KEY</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[SpecialOfferID]</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">[ProductID]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">REFERENCES</span> <span class="sqlScriptsNormal">[Sales]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[SpecialOfferProduct]</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[SpecialOfferID]</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">[ProductID]</span><span class="sqlScriptsOperator">)</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Individual products associated with a specific sales order. See SalesOrderHeader.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsOperator">NULL</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Shipment tracking number supplied by the shipper.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;CarrierTrackingNumber&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Per product subtotal. Computed as UnitPrice * (1 - UnitPriceDiscount) * OrderQty.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;LineTotal&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Date and time the record was last updated.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;ModifiedDate&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Quantity ordered per product.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;OrderQty&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Product sold to customer. Foreign key to Product.ProductID.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;ProductID&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;ROWGUIDCOL number uniquely identifying the record. Used to support a merge replication sample.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;rowguid&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Primary key. One incremental unique number per product sold.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetailID&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Primary key. Foreign key to SalesOrderHeader.SalesOrderID.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderID&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Promotional code. Foreign key to SpecialOffer.SpecialOfferID.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SpecialOfferID&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Selling price of a single product.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;UnitPrice&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Discount amount.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;COLUMN&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;UnitPriceDiscount&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Check constraint [OrderQty] &gt; (0)&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;CONSTRAINT&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;CK_SalesOrderDetail_OrderQty&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Check constraint [UnitPrice] &gt;= (0.00)&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;CONSTRAINT&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;CK_SalesOrderDetail_UnitPrice&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Check constraint [UnitPriceDiscount] &gt;= (0.00)&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;CONSTRAINT&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;CK_SalesOrderDetail_UnitPriceDiscount&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Default constraint value of GETDATE()&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;CONSTRAINT&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;DF_SalesOrderDetail_ModifiedDate&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Default constraint value of NEWID()&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;CONSTRAINT&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;DF_SalesOrderDetail_rowguid&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Default constraint value of 0.0&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;CONSTRAINT&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;DF_SalesOrderDetail_UnitPriceDiscount&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Foreign key constraint referencing SalesOrderHeader.PurchaseOrderID.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;CONSTRAINT&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Foreign key constraint referencing SpecialOfferProduct.SpecialOfferIDProductID.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;CONSTRAINT&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Primary key (clustered) constraint&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;CONSTRAINT&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Unique nonclustered index. Used to support replication samples.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;INDEX&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;AK_SalesOrderDetail_rowguid&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Nonclustered index.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;INDEX&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;IX_SalesOrderDetail_ProductID&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Clustered index created by a primary key constraint.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;INDEX&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID&#39;</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">EXEC</span> <span class="sqlScriptsStoredProcedure">sp_addextendedproperty</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;MS_Description&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;AFTER INSERT, DELETE, UPDATE trigger that inserts a row in the TransactionHistory table, updates ModifiedDate in SalesOrderDetail and updates the SalesOrderHeader.SubTotal column.&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;SCHEMA&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;Sales&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TABLE&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;SalesOrderDetail&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;TRIGGER&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">N</span><span class="sqlScriptsString">&#39;iduSalesOrderDetail&#39;</span><br><span class="sqlScriptsNormal">GO</span><br></div></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="uses">Uses</a></div><div class="panel-body"><ul class="DependencyList"><li><a href="../../../../localhost/User_databases/AdventureWorks2016/Tables/SalesOrderHeader.html">[Sales].[SalesOrderHeader]</a></li> <li><a href="../../../../localhost/User_databases/AdventureWorks2016/Tables/SpecialOfferProduct.html">[Sales].[SpecialOfferProduct]</a></li> <li><a href="../../../../localhost/User_databases/AdventureWorks2016/Security/Schemas/Sales.html">Sales</a></li> </ul></div></div></div></div><div id="footer"><div class="row"><div id="customtext" class="col-sm-4"><div id="projectauthor">Author: &nbsp;dnagykrisztina</div></div><div id="copyright" class="col-sm-4">Copyright 2021 - All Rights Reserved</div><div id="date" class="col-sm-4">Created: 2021. m&#225;rcius 21., vas&#225;rnap 18:38:43</div></div></div></body></html>